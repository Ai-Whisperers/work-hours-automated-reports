# AI Whisperers Work Hours Dashboard

Static website for visualizing GitHub commit-based worked hours data.

## Overview

This is a clean, static HTML/CSS/JavaScript dashboard that displays worked hours calculated from GitHub commits. It's designed to be deployed via GitHub Pages and automatically updated by GitHub Actions.

## Features

- **Worked Hours Tab** (Active):
  - Summary statistics (total days, hours, commits, avg hours/day)
  - Daily hours line chart
  - Hours by repository bar chart
  - Recent work sessions table

- **ADO Report Tab** (Coming Soon): Placeholder for Azure DevOps integration
- **Clockify Report Tab** (Coming Soon): Placeholder for Clockify data

## Files

- `index.html` - Main HTML structure with 3-tab interface
- `styles.css` - Modern dark theme with responsive design
- `app.js` - Client-side JavaScript for data fetching and Chart.js rendering
- `worked_hours.json` - Data file (generated by GitHub Actions or sample data)
- `README.md` - This file

## Local Testing

To test the dashboard locally:

### Method 1: Python HTTP Server

```bash
cd gh-pages-site
python -m http.server 8000
```

Then open: http://localhost:8000

### Method 2: VS Code Live Server

1. Install "Live Server" extension in VS Code
2. Right-click `index.html` → "Open with Live Server"

### Method 3: Any Static Server

Use any static file server like `http-server`, `serve`, or similar.

## Data Format

The `worked_hours.json` file must follow this structure:

```json
{
  "generated_at": "2025-01-16T18:30:00Z",
  "summary": {
    "total_days": 14,
    "total_hours": 87.5,
    "total_commits": 234,
    "avg_hours_per_day": 6.25
  },
  "daily_hours": [
    {"date": "2025-01-03", "hours": 7.2},
    {"date": "2025-01-04", "hours": 5.8}
  ],
  "repo_hours": [
    {"repo": "repository-name", "hours": 32.5}
  ],
  "sessions": [
    {
      "author": "Developer Name",
      "repo": "repository-name",
      "start": "2025-01-16T14:00:00Z",
      "end": "2025-01-16T17:20:00Z",
      "hours": 3.33,
      "commit_count": 8
    }
  ]
}
```

## GitHub Actions Integration

The dashboard is automatically updated by the `gh-pages-deploy.yml` workflow:

1. **Trigger**: Runs every 6 hours, on push to `gh-pages-site/**`, or manually
2. **Generate Data**: Runs `scripts/generate_worked_hours_json.py` to fetch commits and calculate hours
3. **Deploy**: Pushes to `gh-pages` branch using peaceiris/actions-gh-pages action
4. **Result**: Live dashboard at `https://[org].github.io/[repo]/`

### Required GitHub Secrets

- `GH_TOKEN`: GitHub token with repo access (for fetching commits)
- `COMMIT_TRACKER_ORG`: GitHub organization name (defaults to 'Ai-Whisperers')

### Optional Configuration

Set these as repository variables or secrets:

- `COMMIT_HISTORY_DAYS`: Number of days to fetch (default: 30)
- `COMMIT_TRACKER_MODE`: 'organization' or 'user' (default: organization)
- `COMMIT_TRACKER_TIMEZONE`: Timezone for calculations (default: UTC)
- `SESSION_GAP_HOURS`: Gap between work sessions (default: 3)
- `MIN_SESSION_HOURS`: Minimum session duration (default: 0.25)

## Customization

### Change Colors

Edit `styles.css` CSS variables:

```css
:root {
    --primary-color: #2196F3;
    --secondary-color: #4CAF50;
    --background: #0d1117;
    --surface: #161b22;
}
```

### Modify Charts

Edit `app.js` Chart.js configuration in `renderDailyHoursChart()` and `renderRepoHoursChart()`.

### Update Schedule

Edit `.github/workflows/gh-pages-deploy.yml` cron schedule:

```yaml
schedule:
  - cron: '0 */6 * * *'  # Every 6 hours
```

## Browser Support

- Chrome/Edge: ✅ Full support
- Firefox: ✅ Full support
- Safari: ✅ Full support
- Mobile: ✅ Responsive design

## Dependencies

- **Chart.js v4.4.1** - Loaded from CDN
- No build process required
- No node_modules
- Pure client-side rendering

## Troubleshooting

### "Failed to Load Data" Error

**Cause**: `worked_hours.json` doesn't exist yet or failed to fetch.

**Solution**:
1. Check if the file exists in the gh-pages branch
2. Wait for GitHub Actions to complete first run
3. Check workflow logs for errors
4. Verify GH_TOKEN has correct permissions

### Charts Not Displaying

**Cause**: Chart.js CDN failed to load or data format is incorrect.

**Solution**:
1. Check browser console for errors
2. Verify `worked_hours.json` structure matches expected format
3. Check network tab to see if Chart.js CDN loaded

### Data Not Updating

**Cause**: GitHub Actions workflow isn't running or deployment failed.

**Solution**:
1. Check Actions tab in GitHub repo
2. Verify cron schedule syntax
3. Check if gh-pages branch exists
4. Verify GitHub Pages is enabled in repo settings

## License

Part of the AI Whisperers Work Hours Automated Reports project.
